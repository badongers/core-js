/*! core 2015-06-02 */
!function(a,b){function c(a,b,c,d){var e=a.exec(j);return null===e||"object"!=typeof e||"number"!=typeof e.length?!0:"number"==typeof e.length&&e.length>=b+1?c&&d?e[b].replace(c,d):e[b]:!0}function d(a,b){return new Function("return function(call) { return function "+a+"() { return call(this, arguments) }; };")()(Function.apply.bind(b))}function e(a,b){for(var c=a.split("."),d=c.length,e=b,f=0;d>f;f++)try{e=e[c[f]]}catch(g){return null}return e}function f(b){var c={};if("inherits"in b||(b.inherits="core.Core"),c.base=a.core._import(b.inherits),"base"in c)try{var f=c.base.prototype}catch(g){throw new Error("Module "+b.classname+" failed to inherit "+b.inherits)}var h=b.classname.split(".");c.funcname=h[h.length-1],c[c.funcname]=d(c.funcname,function(a){a&&a.__inheriting__||(a&&"parent"in a&&(this.parent=a.parent),a&&"el"in a&&(this.node=this.el=a.el),a&&"params"in a&&(this.params=a.params),f&&f.constructor.call(this,a))}),c.base&&c[c.funcname].inherits(c.base);var i=c[c.funcname].prototype;i.dispose=function(){"onBeforeDispose"in this&&"function"==typeof this.onBeforeDispose&&(this.onBeforeDispose(),this.onBeforeDispose=null);try{f.dispose.call(this)}catch(a){console.log("dispose",a)}},i.construct=function(a){"onBeforeConstruct"in this&&"function"==typeof this.onBeforeConstruct&&(this.onBeforeConstruct(),this.onBeforeConstruct=null);try{f.construct.call(this,a),"onAfterConstruct"in this&&"function"==typeof this.onAfterConstruct&&(this.onAfterConstruct(),this.onAfterConstruct=null)}catch(b){console.log("construct",b.stack)}};var j={$super:f,$classname:c.funcname},k=b.module;if(k instanceof Array&&k.length){for(var l=k.pop(),m=k.length;m--;){var n=e(k[m],a);k[m]=n}if("function"!=typeof l)throw new Error("Property module does not contain a function.");l.apply(j,k)}else"function"==typeof k&&k.apply(j);for(var o in j)i[o]=j[o];a.core.registerNamespace(b.classname,"singleton"in b&&b.singleton?new c[c.funcname]:c[c.funcname])}function g(b){var c=b.module;if(c instanceof Array&&c.length){for(var d=c.length-1;d--;)if("function"!=typeof c[d]){var f=e(c[d],a);if(!f)return!1}if("function"==typeof mfunc)return!0}else if("function"==typeof c)return!0;return!0}if(Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a||window,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),Function.prototype.inherits=function(a){this.prototype=new a({__inheriting__:!0})},Function.prototype.augment=Function.prototype.mixin=Function.prototype.partial=function(a){if("function"==typeof a)for(var b in a.prototype)this.prototype[b]=a.prototype[b];if("object"==typeof a)for(var b in a)this.prototype[b]=a[b]},a.core||(a.core={}),"undefined"!=typeof navigator){var h,i=navigator.appName,j=navigator.userAgent,k=j.match(/(opera|chrome|safari|firefox|msie|trident)\/?\s*(\.?\d+(\.\d+)*)/i);k&&null!=(h=j.match(/version\/([\.\d]+)/i))&&(k[2]=h[1]),k=k?[k[1],k[2]]:[i,navigator.appVersion,"-?"];var l={mobile:!1,ios:!1,iphone:!1,ipad:!1,android:!1,webos:!1,mac:!1,windows:!1,other:!0,name:"trident"==k[0].toLowerCase()?"msie":k[0].toLowerCase(),version:k[1].split(".")[0],touch:"ontouchstart"in window,full_version:k[1]};/mobile/i.test(j)&&(l.mobile=!0),/like Mac OS X/.test(j)&&(l.ios=c(/CPU( iPhone)? OS ([0-9\._]+) like Mac OS X/,2,/_/g,"."),l.iphone=/iPhone/.test(j),l.ipad=/iPad/.test(j)),/Android/.test(j)&&(l.android=c(/Android ([0-9\.]+)[\);]/,1)),/webOS\//.test(j)&&(l.webos=c(/webOS\/([0-9\.]+)[\);]/,1)),/(Intel|PPC) Mac OS X/.test(j)&&(l.mac=c(/(Intel|PPC) Mac OS X ?([0-9\._]*)[\)\;]/,2,/_/g,".")),/Windows NT/.test(j)&&(l.windows=c(/Windows NT ([0-9\._]+)[\);]/,1));for(var m in l)"Other"!==m&&"Mobile"!==m&&l[m]!==!1&&(l.other=!1);a.core.browser=l,a.core.browser["trident"==k[0].toLowerCase()?"msie":k[0].toLowerCase()]={version:k[1].split(".")[0]}}a.core.GUID=function(){for(var a=[],b="0123456789abcdef",c=0;36>c;c++)a[c]=b.substr(Math.floor(16*Math.random()),1);a[14]="4",a[19]=b.substr(3&a[19]|8,1),a[8]=a[13]=a[18]=a[23]="-";var d=a.join("");return d},a.core.rect=function(a){var b={};if(a instanceof Array&&(b=a[0].getBoundingClientRect()),b=a.getBoundingClientRect(),"undefined"==typeof b.width){var c=b;b={top:c.top,left:c.left,right:c.right,bottom:c.bottom},b.width=b.right-b.left,b.height=b.bottom+b.top}else"undefined"==typeof b.right&&(b={top:c.top,left:c.left,width:c.width,height:c.height},b.right=b.left+b.width,b.bottom=b.top+b.height);return b},a.core.registerNamespace=function(b,c){var d=b.split("."),e=d.shift();a[e]||(a[e]={});for(var f=a[e];d.length>1;){var g=d.shift();f[g]||(f[g]={}),f=f[g]}if(d.length){var h=d.shift();h&&(f[h]=c||{})}else a[e]=c},a.core._import=function(b){for(var c=b.split("."),d=a;c.length;){var e=c.shift();if(!d[e])return null;d=d[e]}return d},a.core.dependency=function(b,c){a[b]||console.warn(c)},a.core.documentReady=function(a,b){var c=!1,d=!0,e=a.document,f=e.documentElement,g=e.addEventListener?"addEventListener":"attachEvent",h=e.addEventListener?"removeEventListener":"detachEvent",i=e.addEventListener?"":"on",j=function(d){("readystatechange"!=d.type||"complete"==e.readyState)&&(("load"==d.type?a:e)[h](i+d.type,j,!1),!c&&(c=!0)&&b.call(a,d.type||d))},k=function(){try{f.doScroll("left")}catch(a){return void setTimeout(k,50)}j("poll")};if("complete"==e.readyState)b.call(a,"lazy");else{if(e.createEventObject&&f.doScroll){try{d=!a.frameElement}catch(l){}d&&k()}e[g](i+"DOMContentLoaded",j,!1),e[g](i+"readystatechange",j,!1),a[g](i+"load",j,!1)}},a==window&&!window.addEventListener&&function(a,b,c,d,e,f,g){a[d]=b[d]=c[d]=function(a,b){var c=this;g.unshift([c,a,b,function(a){a.currentTarget=c,a.preventDefault=function(){a.returnValue=!1},a.stopPropagation=function(){a.cancelBubble=!0},a.target=a.srcElement||c,b.call(c,a)}]),this.attachEvent("on"+a,g[0][3])},a[e]=b[e]=c[e]=function(a,b){for(var c,d=0;c=g[d];++d)if(c[0]==this&&c[1]==a&&c[2]==b)return this.detachEvent("on"+a,g.splice(d,1)[0][3])},a[f]=b[f]=c[f]=function(a){return this.fireEvent("on"+a.type,a)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]),a.core.ENV={},a.core.configure=function(a){for(var b in a)this.ENV[b]=a[b]};var n=[];a.core.mixin=function(a,b){for(var c in b)a[c]=b[c]},a.core.registerModule=function(b){if(b.classname)g(b)?(f(b),n.length&&a.core.registerModule(n.pop())):n.push(b);else{if(!b.mixin)throw new Error("Error registering a module");var c=new Function("return "+b.mixin)(),d={},h=b.module;if(h instanceof Array&&h.length){for(var i=h.pop(),j=h.length;j--;)h[j]=e(h[j],a);i.apply(d,h)}else"function"==typeof h&&h.apply(d);for(var k in d)"prototype"in c?c.prototype[k]=d[k]:c[k]=d[k]}},a.core.strapUp=function(c,d){if(n.length)for(;n.length;)f(n.pop());if("undefined"!=typeof b){var e=!1,g=function(a){var b="undefined"!=typeof process&&void 0!==process.arch?GLOBAL:window,c=d?core._import(d):b.core.Module,f={};f.el=a,"__coreapp__"in window?(window.__coreapp__ instanceof Array||(window.__coreapp__=[window.__coreapp__]),window.__coreapp__.push(new c(f))):window.__coreapp__=new c(f),e=!0};a.core.documentReady(window,function(){g(b.body),c()})}}}("undefined"!=typeof process&&void 0!==process.arch?GLOBAL:window,document),"console"in window||(console={log:function(){},warn:function(){},trace:function(){}}),function(){function a(a){if(!a||!a.__inheriting__){a&&a.el&&(this.node=this.el=a.el,"rivets"in window&&c.call(this)),this.proxyHandlers={},"construct"in this&&this.construct(a||{});var b=this;setTimeout(function(){b.delayedConstruct&&b.delayedConstruct(a||{})},0)}}var b=function(){this.$bindings=rivets.bind(this.node,this,{prefix:"data-rv",preloadData:!0,rootInterface:".",templateDelimiters:["{{","}}"]}),setTimeout(function(){"bindingComplete"in this&&this.bindingComplete()}.bind(this),1)},c=function(){b.call(this)};a.prototype.handleEvent=a.prototype._=a.prototype.getProxyHandler=function(a){return this.proxyHandlers[a]||("function"==typeof this[a]?this.proxyHandlers[a]=this[a].bind(this):console.warn("Warning: attempt to create non existing method as proxy "+a)),this.proxyHandlers[a]},a.prototype.clearProxyHandler=function(a){var b=this.proxyHandlers[a];return null===b&&console.warn("Warning: attempt to clear a non-existing proxy - "+a),this.proxyHandlers[a]=null,delete this.proxyHandlers[a],b},a.prototype.construct=function(a){},a.prototype.delayedConstruct=function(a){},a.prototype.dispose=function(a){if(a&&this.el)try{this.el.parentNode.removeChild(this.el)}catch(b){}this.el=null;for(var c in this.proxyHandlers)this.proxyHandlers[c]=null,delete this.proxyHandlers[c];this.$bindings.unbind(),delete this.$bindings},a.prototype.find=function(a){var b=null;return"jQuery"in window&&(b=window.jQuery),b?b(this.node).find(a):this.node.querySelectorAll(a)},a.prototype.findAll=function(a){var b=null;return"jQuery"in window&&(b=window.jQuery),b?b(document).find(a):document.querySelectorAll(a)},core.registerNamespace("core.Core",a)}(),"undefined"!=typeof module&&module.exports&&(module.exports=core),function(){core.registerModule({inherits:"core.Core",classname:"core.EventDispatcher",module:function(){this.onAfterConstruct=function(a){this.events={}},this.onBeforeDispose=function(){this.removeAll(),this.events=null};var a=function(a,b){for(var c=a.length,d=0;c>d;d++)if(a[d].scope===b)return a[d];return b.__core__signal__id__=core.GUID(),-1},b=function(b,c,d,e){var f=null,g=a.call(this,this.events[b+(e?"_once":"")],c);-1===g&&c.dispose?(f=c.dispose,c.dispose=function(){var a=Array.prototype.shift.call(arguments),b=Array.prototype.shift.call(arguments);return b.removeScope(this,c),b=null,a=null,f.apply(this,arguments)}.bind(c,d,this),this.events[b+(e?"_once":"")].push({method:d,scope:c,dispose_orig:f})):-1!==g?g.method!=d&&this.events[b+(e?"_once":"")].push({method:d,scope:g.scope,dispose_orig:g.dispose_orig}):this.events[b+(e?"_once":"")].push({method:d,scope:c,dispose_orig:null})};this.on=function(a,c,d){"events"in this||(this.events={}),this.events[a]||(this.events[a]=[]),b.call(this,a,d,c)},this.once=function(a,c,d){this.events[a+"_once"]||(this.events[a+"_once"]=[]),b.call(this,a,d,c,!0)};var c=function(a,b,c){if(this.events[a]){for(var d=this.events[a].length;d--;)if(this.events[a][d].scope===b&&this.events[a][d].method===c){var e=this.events[a].splice(d,1).pop();e.scope.dispose&&e.dispose_orig&&(e.scope.dispose=e.dispose_orig),delete e.scope.__core__signal__id__,e.scope=null,e.dispose_orig=null,delete e.dispose_orig,e=null}0===this.events[a].length&&delete this.events[a]}};this.off=function(a,b,d){c.call(this,a,d,b),c.call(this,a+"_once",d,b)},this.removeScope=function(a){for(var b in this.events){for(var c=this.events[b].length;c--;)if(this.events[b][c].scope===a){var d=this.events[b].splice(c,1).pop();d.scope.dispose&&d.dispose_orig&&(d.scope.dispose=d.dispose_orig),delete d.scope.__core__signal__id__,d=null}0===this.events[b].length&&delete this.events[b]}},this.removeAll=function(){for(var a in this.events){for(this.events[a].length;this.events[a].length;){var b=this.events[a].shift();b.scope.dispose&&b.dispose_orig&&(b.scope.dispose=b.dispose_orig),delete b.__core__signal__id__,b=null}0===this.events[a].length&&delete this.events[a]}this.events={}},this.trigger=function(a,b){var c=b||{};if(c.type||(c.type=a),this.events&&this.events[a])for(var d=this.events[a],e=d.length,f=0;e>f;f++){var g=d[f];g.scope[g.method].call(g.scope,c),g=null}if(this.events&&this.events[a+"_once"]){for(var h=this.events[a+"_once"];h.length;){var g=h.shift();g.scope[g.method].call(g.scope,c),g=null}h.length||delete this.events[a+"_once"]}c=null}}})}(),function(){core.registerModule({inherits:"core.EventDispatcher",singleton:!0,classname:"core.EventBroadcaster",module:function(){}})}(),function(){core.registerModule({inherits:"core.Core",classname:"core.XHR",singleton:!0,module:function(){var __xhr__=function(){return win.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},win=window,doc=document,before,defaultXdrResponseType="json",limit=null,requests=0,request_stack=[],xhr2=""===__xhr__().responseType,request=function(method,url,data,options,before){method=method.toUpperCase(),data=data||null,options=options||{};var nativeResponseParsing=!1,crossOrigin,xhr,xdr=!1,timeoutInterval,aborted=!1,attempts=0,headers={},mimeTypes={text:"*/*",xml:"text/xml",json:"application/json",post:"application/x-www-form-urlencoded"},accept={text:"*/*",xml:"application/xml; q=1.0, text/xml; q=0.8, */*; q=0.1",json:"application/json; q=1.0, text/*; q=0.8, */*; q=0.1"},contentType="Content-Type",vars="",i,j,serialized,then_stack=[],catch_stack=[],complete_stack=[],response,success,error,func,promises={then:function(a){return options.async?then_stack.push(a):success&&a.call(xhr,response),promises},error:function(a){return options.async?catch_stack.push(a):error&&a.call(xhr,response),promises},complete:function(a){return options.async?complete_stack.push(a):a.call(xhr),promises}},promises_limit={then:function(a){return request_stack[request_stack.length-1].then.push(a),promises_limit},error:function(a){return request_stack[request_stack.length-1]["catch"].push(a),promises_limit},complete:function(a){return request_stack[request_stack.length-1].complete.push(a),promises_limit}},handleResponse=function(){if(!aborted){var i,req,p,responseType;if(--requests,clearInterval(timeoutInterval),request_stack.length){for(req=request_stack.shift(),p=qwest(req.method,req.url,req.data,req.options,req.before),i=0;func=req.then[i];++i)p.then(func);for(i=0;func=req["catch"][i];++i)p["catch"](func);for(i=0;func=req.complete[i];++i)p.complete(func)}try{if("status"in xhr&&!/^2|1223/.test(xhr.status))throw xhr.status+" ("+xhr.statusText+")";var responseText="responseText",responseXML="responseXML",parseError="parseError";if(nativeResponseParsing&&"response"in xhr&&null!==xhr.response)response=xhr.response;else if("document"==options.responseType){var frame=doc.createElement("iframe");frame.style.display="none",doc.body.appendChild(frame),frame.contentDocument.open(),frame.contentDocument.write(xhr.response),frame.contentDocument.close(),response=frame.contentDocument,doc.body.removeChild(frame)}else{if(responseType=options.responseType,"auto"==responseType)if(xdr)responseType=defaultXdrResponseType;else{var ct=xhr.getResponseHeader(contentType)||"";responseType=ct.indexOf(mimeTypes.json)>-1?"json":ct.indexOf(mimeTypes.xml)>-1?"xml":"text"}switch(responseType){case"json":try{response="JSON"in win?JSON.parse(xhr[responseText]):eval("("+xhr[responseText]+")")}catch(e){throw"Error while parsing JSON body : "+e}break;case"xml":try{win.DOMParser?response=(new DOMParser).parseFromString(xhr[responseText],"text/xml"):(response=new ActiveXObject("Microsoft.XMLDOM"),response.async="false",response.loadXML(xhr[responseText]))}catch(e){response=void 0}if(!response||!response.documentElement||response.getElementsByTagName("parsererror").length)throw"Invalid XML";break;default:response=xhr[responseText]}}if(success=!0,p=response,options.async)for(i=0;func=then_stack[i];++i)p=func.call(xhr,p)}catch(e){if(error=!0,options.async)for(i=0;func=catch_stack[i];++i)func.call(xhr,e,url)}if(options.async)for(i=0;func=complete_stack[i];++i)func.call(xhr)}},buildData=function(a,b){var c,d=[],e=encodeURIComponent;if("object"==typeof a&&null!=a){for(c in a)if(a.hasOwnProperty(c)){var f=buildData(a[c],b?b+"["+c+"]":c);""!==f&&(d=d.concat(f))}}else null!=a&&null!=b&&d.push(e(b)+"="+e(a));return d.join("&")};switch(++requests,options.async="async"in options?!!options.async:!0,options.cache="cache"in options?!!options.cache:"GET"!=method,options.dataType="dataType"in options?options.dataType.toLowerCase():"post",options.responseType="responseType"in options?options.responseType.toLowerCase():"auto",options.user=options.user||"",options.password=options.password||"",options.withCredentials=!!options.withCredentials,options.timeout="timeout"in options?parseInt(options.timeout,10):3e3,options.attempts="attempts"in options?parseInt(options.attempts,10):3,i=url.match(/\/\/(.+?)\//),crossOrigin=i&&i[1]?i[1]!=location.host:!1,"ArrayBuffer"in win&&data instanceof ArrayBuffer?options.dataType="arraybuffer":"Blob"in win&&data instanceof Blob?options.dataType="blob":"Document"in win&&data instanceof Document?options.dataType="document":"FormData"in win&&data instanceof FormData&&(options.dataType="formdata"),options.dataType){case"json":data=JSON.stringify(data);break;case"post":data=buildData(data)}if(options.headers){var format=function(a,b,c){return b+c.toUpperCase()};for(i in options.headers)headers[i.replace(/(^|-)([^-])/g,format)]=options.headers[i]}if(headers[contentType]||"GET"==method||options.dataType in mimeTypes&&mimeTypes[options.dataType]&&(headers[contentType]=mimeTypes[options.dataType]),headers.Accept||(headers.Accept=options.responseType in accept?accept[options.responseType]:"*/*"),crossOrigin||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest"),"GET"==method&&(vars+=data),options.cache||(vars&&(vars+="&"),vars+="__t="+ +new Date),vars&&(url+=(/\?/.test(url)?"&":"?")+vars),limit&&requests==limit)return request_stack.push({method:method,url:url,data:data,options:options,before:before,then:[],"catch":[],complete:[]}),promises_limit;var send=function(){if(xhr=__xhr__(),crossOrigin&&("withCredentials"in xhr||!win.XDomainRequest||(xhr=new XDomainRequest,xdr=!0,"GET"!=method&&"POST"!=method&&(method="POST"))),xdr?xhr.open(method,url):(xhr.open(method,url,options.async,options.user,options.password),xhr2&&options.async&&(xhr.withCredentials=options.withCredentials)),!xdr)for(var a in headers)xhr.setRequestHeader(a,headers[a]);if(xhr2&&"document"!=options.responseType)try{xhr.responseType=options.responseType,nativeResponseParsing=xhr.responseType==options.responseType}catch(b){}xhr2||xdr?xhr.onload=handleResponse:xhr.onreadystatechange=function(){4==xhr.readyState&&handleResponse()},"auto"!==options.responseType&&"overrideMimeType"in xhr&&xhr.overrideMimeType(mimeTypes[options.responseType]),before&&before.call(xhr),xdr?setTimeout(function(){xhr.send("GET"!=method?data:null)},0):xhr.send("GET"!=method?data:null)},timeout=function(){timeoutInterval=setTimeout(function(){if(aborted=!0,xhr.abort(),options.attempts&&++attempts==options.attempts){if(aborted=!1,error=!0,response="Timeout ("+url+")",options.async)for(i=0;func=catch_stack[i];++i)func.call(xhr,response)}else aborted=!1,timeout(),send()},options.timeout)};return timeout(),send(),promises},checkMocks=function(a){core.ENV.httpMocks&&console.log("TODO: implement http mock")},handleMockedPromise=function(){},create=function(a){return function(b,c,d){var e=before;return before=null,request(a,b,c,d,e)}};this.before=function(a){return before=a,this},this.get=create("GET"),this.post=create("POST"),this.put=create("PUT"),this["delete"]=create("DELETE"),this.xhr2=xhr2,this.limit=function(a){limit=a},this.setDefaultXdrResponseType=function(a){defaultXdrResponseType=a.toLocaleLowerCase()}}})}(),function(a){core.registerModule({inherits:"core.EventDispatcher",classname:"core.Module",module:["core.XHR",function(b){function c(a){var b={},c=a.split(";");""==c[c.length-1]&&c.pop();for(var d=c.length;d--;){var e=c[d].split(":");b[e[0]]=e[1]}return b}function d(a){var b=a.childNodes;for(var c in b){var e=b[c];if(1===e.nodeType){if(e.getAttribute("core-module")||e.getAttribute("data-core-module"))break;if(e.getAttribute("data-core-prop")||e.getAttribute("core-prop")){this.properties||(this.properties={});var f=e.getAttribute("data-core-prop")||e.getAttribute("core-prop");!this.properties[f]||this.properties[f]instanceof Array||(this.properties[f]=[this.properties[f]]),this.properties[f]instanceof Array?this.properties[f].push(e):this.properties[f]=e}e.hasChildNodes()&&d.call(this,e)}}}function e(b){var d=function(b){for(var e,f,g=-1,h=b.length-1;g++<h;){var i=b[g];if(1==i.nodeType){var j=i.getAttribute("core-module")||i.getAttribute("data-core-module"),k=i.getAttribute("core-id")||i.getAttribute("data-core-id"),l=i.getAttribute("core-params")||i.getAttribute("data-core-params"),m=i.classList.contains("core-init");if(!m)if(j&&k&&!this[k])e=Function.apply(a,["return "+j])(),f={},f.params=l?c(l):null,f.el=i,f.parent=this,i.classList.add("core-init"),this[k]=new e(f);else if(j&&!k){if(e=Function.apply(a,["return "+j])(),f={},f.params=l?c(l):null,f.parent=this,f.el=i,i.classList.add("core-init"),!e)throw new Error(j+" module not found.");new e(f)}else if(j&&k&&this[k]){e=Function.apply(a,["return "+j])(),f={},f.params=l?c(l):null,f.el=i,i.classList.add("core-init"),f.parent=this;var n=new e(f);try{this[k].push(n)}catch(o){this[k]=[this[k]],this[k].push(n)}}else i.hasChildNodes()&&d.call(this,i.childNodes)}}};d.call(this,b.childNodes)}this.delayedConstruct=function(a){e.call(this,this.el),d.call(this,this.el),"initialized"in this&&this.initialized(a),this.el.addEventListener("DOMNodeInserted",f.bind(this),!1)};var f=function(){e.call(this,this.el)};this.loadViewModule=function(a){var c;b.get(a).then(function(a){c=a}.bind(this)).error(function(a){}).complete(function(a){this.appendFragment(c)}.bind(this))},this.appendNode=function(a,b){a instanceof Array&&(a=a[0]),b instanceof Array&&(b=b[0]);var c=document.createElement("div");c.appendChild(a),e.call(this,c),b?b.appendChild(c.firstChild):this.el.appendChild(c.firstChild),c=null},this.insertNodeBefore=function(a,b){b instanceof Array&&(b=b[0]);var c=document.createElement("div");c.appendChild(b),e.call(this,c),a instanceof Array&&(a=a[0]),a.parentNode.insertBefore(c.firstChild,a),c=null},this.insertNodeAfter=function(a,b){b instanceof Array&&(b=b[0]);var c=document.createElement("div");c.appendChild(b),e.call(this,c),a instanceof Array&&(a=a[0]),a.parentNode.insertAfter(c.firstChild,a),c=null},this.appendFragment=function(a,b){var c=document.createElement("div");c.innerHTML=a,e.call(this,c);for(var d in c.childNodes)try{b?b.appendChild(c.childNodes[d]):this.el.appendChild(c.childNodes[d])}catch(f){}c=null},this.triggerSubModules=function(){e.call(this,this.node)}}]})}("undefined"!=typeof process&&void 0!==process.arch?GLOBAL:window),function(){core.registerModule({inherits:"core.EventDispatcher",classname:"core.WindowEvents",singleton:!0,module:function(){this.dispatchScroll=function(){var a=this.scrollLeft=void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,b=this.scrollTop=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;this.trigger("window.scroll",{scrollTop:b,scrollLeft:a}),this.tick=!1},this.dispatchResize=function(){var a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,b=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c="mobile";a>=992&&1200>a?c="medium":992>a&&a>=768?c="small":a>=1200&&(c="large"),this.trigger("window.resize",{width:a,height:b,type:c}),this.tickResize=!1},this.dispatchMotion=function(){var a=this.motionEvent,b=a.accelerationIncludingGravity.x,c=a.accelerationIncludingGravity.y,d=a.accelerationIncludingGravity.z,e=a.rotationRate.alpha,f=a.rotationRate.gamma,g=a.rotationRate.beta;this.trigger("window.device.motion",{accelX:b,accelY:c,accelZ:d,rotationAlpha:e,rotationBeta:g,rotationGamma:f}),this.tickMotion=!1,this.motionEvent=null},this.onWindowScroll=function(){this.tick||(this.tick=!0,requestAnimationFrame(this._("dispatchScroll")))},this.onWindowResize=function(){this.tickResize||(this.tickResize=!0,requestAnimationFrame(this._("dispatchResize")))},this.onDeviceMotion=function(a){this.motionEvent=a,this.tickMotion||(this.tickMotion=!0,requestAnimationFrame(this._("dispatchMotion")))},this.onAfterConstruct=function(){this.scrollTop=0,this.scrollLeft=0,window.addEventListener("scroll",this._("onWindowScroll")),window.addEventListener("resize",this._("onWindowResize")),core.browser.touch&&window.addEventListener("devicemotion",this._("onDeviceMotion")),this.$super.onAfterConstruct.call(this)}}})}(),function(){core.registerModule({inherits:"core.Core",classname:"core.Parallax",singleton:!0,module:["core.WindowEvents",function(a){this.onAfterConstruct=function(){this.supportTouch=core.browser.touch,this.elements=this.findAll("[core-parallax]"),this.elements.length&&(a.on("window.scroll",this._("update"),this),a.on("window.device.motion",this._("updateAcceleration"),this),this.tick=!0,this.update())},this.update=function(){for(var a=this.elements.length;a--;){var b=Number(this.elements[a].getAttribute("scroll-offset"))||.1,c=Number(this.elements[a].getAttribute("scroll-invert"))||0,d=core.rect(this.elements[a]).top,e=d*b;c&&(e*=-1),this.elements[a].style.backgroundPosition="center "+e+"px"}this.tick=!1},this.updateAcceleration=function(a){this.update()}}]})}(),"document"in self&&("classList"in document.createElement("_")?!function(){"use strict";var a=document.createElement("_");if(a.classList.add("c1","c2"),!a.classList.contains("c2")){var b=function(a){var b=DOMTokenList.prototype[a];DOMTokenList.prototype[a]=function(a){var c,d=arguments.length;for(c=0;d>c;c++)a=arguments[c],b.call(this,a)}};b("add"),b("remove")}if(a.classList.toggle("c3",!1),a.classList.contains("c3")){var c=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,b){return 1 in arguments&&!this.contains(a)==!b?b:c.call(this,a)}}a=null}():!function(a){"use strict";if("Element"in a){var b="classList",c="prototype",d=a.Element[c],e=Object,f=String[c].trim||function(){return this.replace(/^\s+|\s+$/g,"")},g=Array[c].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},h=function(a,b){this.name=a,this.code=DOMException[a],this.message=b},i=function(a,b){if(""===b)throw new h("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(b))throw new h("INVALID_CHARACTER_ERR","String contains an invalid character");return g.call(a,b)},j=function(a){for(var b=f.call(a.getAttribute("class")||""),c=b?b.split(/\s+/):[],d=0,e=c.length;e>d;d++)this.push(c[d]);this._updateClassName=function(){a.setAttribute("class",this.toString())}},k=j[c]=[],l=function(){return new j(this)};if(h[c]=Error[c],k.item=function(a){return this[a]||null},k.contains=function(a){return a+="",-1!==i(this,a)},k.add=function(){var a,b=arguments,c=0,d=b.length,e=!1;do a=b[c]+"",-1===i(this,a)&&(this.push(a),e=!0);while(++c<d);e&&this._updateClassName()},k.remove=function(){var a,b,c=arguments,d=0,e=c.length,f=!1;do for(a=c[d]+"",b=i(this,a);-1!==b;)this.splice(b,1),f=!0,b=i(this,a);while(++d<e);f&&this._updateClassName()},k.toggle=function(a,b){a+="";var c=this.contains(a),d=c?b!==!0&&"remove":b!==!1&&"add";return d&&this[d](a),b===!0||b===!1?b:!c},k.toString=function(){return this.join(" ")},e.defineProperty){var m={get:l,enumerable:!0,configurable:!0};try{e.defineProperty(d,b,m)}catch(n){-2146823252===n.number&&(m.enumerable=!1,e.defineProperty(d,b,m))}}else e[c].__defineGetter__&&d.__defineGetter__(b,l)}}(self)),"undefined"==typeof WeakMap&&!function(){var a=Object.defineProperty,b=Date.now()%1e9,c=function(){this.name="__st"+(1e9*Math.random()>>>0)+(b++ +"__")};c.prototype={set:function(b,c){var d=b[this.name];return d&&d[0]===b?d[1]=c:a(b,this.name,{value:[b,c],writable:!0}),this},get:function(a){var b;return(b=a[this.name])&&b[0]===a?b[1]:void 0},"delete":function(a){var b=a[this.name];return b&&b[0]===a?(b[0]=b[1]=void 0,!0):!1},has:function(a){var b=a[this.name];return b?b[0]===a:!1}},window.WeakMap=c}(),function(a){function b(a){u.push(a),t||(t=!0,q(d))}function c(a){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(a)||a}function d(){t=!1;var a=u;u=[],a.sort(function(a,b){return a.uid_-b.uid_});var b=!1;a.forEach(function(a){var c=a.takeRecords();e(a),c.length&&(a.callback_(c,a),b=!0)}),b&&d()}function e(a){a.nodes_.forEach(function(b){var c=p.get(b);c&&c.forEach(function(b){b.observer===a&&b.removeTransientObservers()})})}function f(a,b){for(var c=a;c;c=c.parentNode){var d=p.get(c);if(d)for(var e=0;e<d.length;e++){var f=d[e],g=f.options;if(c===a||g.subtree){var h=b(g);h&&f.enqueue(h)}}}}function g(a){this.callback_=a,this.nodes_=[],this.records_=[],this.uid_=++v}function h(a,b){this.type=a,this.target=b,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function i(a){var b=new h(a.type,a.target);return b.addedNodes=a.addedNodes.slice(),b.removedNodes=a.removedNodes.slice(),b.previousSibling=a.previousSibling,b.nextSibling=a.nextSibling,b.attributeName=a.attributeName,b.attributeNamespace=a.attributeNamespace,b.oldValue=a.oldValue,b}function j(a,b){return w=new h(a,b)}function k(a){return x?x:(x=i(w),x.oldValue=a,x)}function l(){w=x=void 0}function m(a){return a===x||a===w}function n(a,b){return a===b?a:x&&m(a)?x:null}function o(a,b,c){this.observer=a,this.target=b,this.options=c,this.transientObservedNodes=[]}var p=new WeakMap,q=window.msSetImmediate;if(!q){var r=[],s=String(Math.random());window.addEventListener("message",function(a){if(a.data===s){var b=r;r=[],b.forEach(function(a){a()})}}),q=function(a){r.push(a),window.postMessage(s,"*")}}var t=!1,u=[],v=0;g.prototype={observe:function(a,b){if(a=c(a),!b.childList&&!b.attributes&&!b.characterData||b.attributeOldValue&&!b.attributes||b.attributeFilter&&b.attributeFilter.length&&!b.attributes||b.characterDataOldValue&&!b.characterData)throw new SyntaxError;var d=p.get(a);d||p.set(a,d=[]);for(var e,f=0;f<d.length;f++)if(d[f].observer===this){e=d[f],e.removeListeners(),e.options=b;break}e||(e=new o(this,a,b),d.push(e),this.nodes_.push(a)),e.addListeners()},disconnect:function(){this.nodes_.forEach(function(a){for(var b=p.get(a),c=0;c<b.length;c++){var d=b[c];if(d.observer===this){d.removeListeners(),b.splice(c,1);break}}},this),this.records_=[]},takeRecords:function(){var a=this.records_;return this.records_=[],a}};var w,x;o.prototype={enqueue:function(a){var c=this.observer.records_,d=c.length;if(c.length>0){var e=c[d-1],f=n(e,a);if(f)return void(c[d-1]=f)}else b(this.observer);c[d]=a},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(a){var b=this.options;b.attributes&&a.addEventListener("DOMAttrModified",this,!0),b.characterData&&a.addEventListener("DOMCharacterDataModified",this,!0),b.childList&&a.addEventListener("DOMNodeInserted",this,!0),(b.childList||b.subtree)&&a.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(a){var b=this.options;b.attributes&&a.removeEventListener("DOMAttrModified",this,!0),b.characterData&&a.removeEventListener("DOMCharacterDataModified",this,!0),b.childList&&a.removeEventListener("DOMNodeInserted",this,!0),(b.childList||b.subtree)&&a.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(a){if(a!==this.target){this.addListeners_(a),this.transientObservedNodes.push(a);var b=p.get(a);b||p.set(a,b=[]),b.push(this)}},removeTransientObservers:function(){var a=this.transientObservedNodes;this.transientObservedNodes=[],a.forEach(function(a){this.removeListeners_(a);for(var b=p.get(a),c=0;c<b.length;c++)if(b[c]===this){b.splice(c,1);break}},this)},handleEvent:function(a){switch(a.stopImmediatePropagation(),a.type){case"DOMAttrModified":var b=a.attrName,c=a.relatedNode.namespaceURI,d=a.target,e=new j("attributes",d);e.attributeName=b,e.attributeNamespace=c;var g=a.attrChange===MutationEvent.ADDITION?null:a.prevValue;f(d,function(a){return!a.attributes||a.attributeFilter&&a.attributeFilter.length&&-1===a.attributeFilter.indexOf(b)&&-1===a.attributeFilter.indexOf(c)?void 0:a.attributeOldValue?k(g):e;
});break;case"DOMCharacterDataModified":var d=a.target,e=j("characterData",d),g=a.prevValue;f(d,function(a){return a.characterData?a.characterDataOldValue?k(g):e:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(a.target);case"DOMNodeInserted":var h,i,d=a.relatedNode,m=a.target;"DOMNodeInserted"===a.type?(h=[m],i=[]):(h=[],i=[m]);var n=m.previousSibling,o=m.nextSibling,e=j("childList",d);e.addedNodes=h,e.removedNodes=i,e.previousSibling=n,e.nextSibling=o,f(d,function(a){return a.childList?e:void 0})}l()}},a.JsMutationObserver=g,a.MutationObserver||(a.MutationObserver=g)}(this),function(a){for(var b=0,c=["webkit","moz"],d=0;d<c.length&&!a.requestAnimationFrame;++d)a.requestAnimationFrame=a[c[d]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.requestAnimationFrame=function(c,d){var e=(new Date).getTime(),f=Math.max(0,16-(e-b)),g=a.setTimeout(function(){c(e+f)},f);return b=e+f,g}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){clearTimeout(a)})}("undefined"!=typeof process&&void 0!==process.arch?GLOBAL:window);